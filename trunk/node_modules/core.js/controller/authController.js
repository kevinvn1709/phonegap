var authController = {
    verify: function(data, socket) {
        var userModel = require('core.js/model/userModel');
        var config = require("../../../config").values;
        async = require('async');
        async.series([
            function(callback) {
                userModel.verify(data, callback);
            }
        ], function(err, result) {
            response = config.response;
            if (result[0].length === 0) {
                response.code = 100001;
            } else {
                socket.set('username', data.username);
                response.code = 100000;
                response.data = {
                    listRoom: config.rooms
                };
                socket.get('username', function(err, name){
                   response.data.username = name; 
                });
            }
            socket.emit('verify', response);
        });
    }
};
module.exports = authController;